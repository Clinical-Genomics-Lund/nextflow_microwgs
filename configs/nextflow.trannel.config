process {
	withName:bwa_align { container = "container/bwa.sif" }
	withName:convert_to_bam { container = "container/samtools.sif" }
	withName:bam_markdup { container = "container/sambamba.sif" }
	withName:kraken { container = "container/kraken2.sif" }
	withName:bracken { container = "container/bracken.sif" }
	withName:spades_assembly { container = "container/spades.sif" }
	withName:quast { container = "container/quast.sif" }
	withName:mlst { container = "container/mlst.sif" }
	withName:ariba { container = "container/ariba.sif" }
	withName:ariba_export { container = "container/picard.sif" }
	withName:bwa_maskpolymorph { container = "container/bwa.sif" }
	withName:samtools_maskpolymorph { container = "container/samtools.sif" }
	withName:freebayes_maskpolymorph { container = "container/freebayes.sif" }
	withName:maskpolymorph_error_corr { container = "container/picard.sif" }
	withName:chewbbaca { container = "container/chewbbaca.sif" }
	withName:postalignqc { container = "container/picard.sif" }
}


singularity{
  enabled = true	
  runOptions = '--bind /fs1/ --bind /trannel --bind /media/hopper'
}

     
params {
  // GENERAL PATHS //
  refpath = '/fs1/resources/ref/micro/'
  outdir = '/trannel/results'
  subdir = 'micro'
  crondir = "${outdir}/cron/"
  krakendb = '/fs1/resources/ref/micro/krakenstd'
  brackendb = '/fs1/resources/ref/micro/krakenstd/database150mers.kmer_distrib'

  cpu_bwa = 8
  cpu_spades = 8
  cpu_many = 8
}


process {
  executor='slurm'
  queue='trannel'
  time=48.h
}

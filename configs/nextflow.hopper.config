singularity{
  enabled = true
  runOptions = '--bind /fs1/ --bind /local/'
}

process {
	withName:bwa_align { container = "container/bwa.sif" }
	withName:convert_to_bam { container = "container/samtools.sif" }
	withName:bam_markdup { container = "container/sambamba.sif" }
	withName:kraken { container = "container/kraken2.sif" }
	withName:bracken { container = "container/bracken.sif" }
	withName:spades_assembly { container = "container/spades.sif" }
	withName:quast { container = "container/quast.sif" }
	withName:mlst { container = "container/mlst.sif" }
	withName:ariba { container = "container/ariba.sif" }
	withName:ariba_export { container = "container/picard.sif" }
	withName:bwa_maskpolymorph { container = "container/bwa.sif" }
	withName:samtools_maskpolymorph { container = "container/samtools.sif" }
	withName:freebayes_maskpolymorph { container = "container/freebayes.sif" }
	withName:maskpolymorph_error_corr { container = "container/picard.sif" }
	withName:chewbbaca { container = "container/chewbbaca.sif" }
	withName:postalignqc { container = "container/picard.sif" }
}


params {
  // GENERAL PATHS //
  refpath = '/fs1/resources/ref/micro/'
  outdir = '/fs1/results_dev'
  subdir = 'micro'
  crondir = "/fs1/results_dev/cron/"
  krakendb = '/fs1/resources/ref/micro/krakenstd'
  brackendb = '/fs1/resources/ref/micro/krakenstd/database150mers.kmer_distrib'
  cgmlst_db = '/trannel/proj/nextflow_microwgs/species/saureus/cgmlst'

  local_tmp = '/local/'

  cpu_bwa = 16
  cpu_spades = 16
  cpu_many = 8
  cpu_chewbbaca = 7

  cgviz = true
}


process {
  executor='slurm'
  queue='normal'
  time=2.h
}
